{"version":3,"file":"subslate.cjs.js","sources":["../src/lib/utils.ts","../src/lib/context.ts","../src/lib/escapes.ts","../src/lib/index.ts"],"sourcesContent":["import type { strPairs, obj } from './typing';\n\nexport function iter<F extends(...args:unknown[])=>ReturnType<F>>(fn: F, inputs: unknown[],endFn?: CallableFunction): Iterable<ReturnType<F>> {return {\n\t[Symbol.iterator]() {return {\n\t\tnext() {\n\t\t\tconst result = fn(...inputs);\n\t\t\tif (result) {\n\t\t\t\treturn {done: false, value: result};\n\t\t\t}\n\t\t\tif (endFn) endFn();\n\t\t\treturn {done: true, value: undefined};\n\t\t},\n\t};},\n};}\nconst isNonEmptyArray = (v: unknown): v is unknown[] => Array.isArray(v) && v.length > 0;\nconst isStrArr = (v: unknown): v is strPairs => isNonEmptyArray(v) && v.length === 2 && v.every(x => typeof x === 'string');\nconst isArrStrArr = (v: unknown): v is strPairs[] => isNonEmptyArray(v) && v.every(x => isStrArr(x));\nexport const defaulted = (v: unknown,d: strPairs,errMsg='Missing Provided Input'): strPairs[] => {\n\tif (typeof v === 'undefined') return [d];\n\tif (typeof v === 'string') return [[v,v]];\n\tif (isStrArr(v)) return [v];\n\tif (isArrStrArr(v)) return v;\n\tthrow Error(errMsg);\n};\nexport function escapeRegExp(text:string): string {\n\treturn text.replace(/[-[\\]{}()*+?.,\\\\^$|#\\s]/g, '\\\\$&');\n}\nexport function regReset(reg: RegExp): void {\n\treg.lastIndex = 0;\n}\nexport const isObj = (obj: unknown): obj is obj => !!obj && typeof obj === 'object' && obj !== null && Object.keys(obj).every(v => typeof v !== 'symbol');\n\n\n// eslint-disable-next-line @typescript-eslint/ban-types\nexport function hasOwnProperty<X extends object, Y extends PropertyKey>(obj: X, prop: Y): obj is X & Record<Y, unknown> {\n\treturn Object.prototype.hasOwnProperty.call(obj,prop);\n}\n","import type { ContextOptions, cacheObj, obj, separators } from './typing';\nimport { escapeRegExp, isObj } from './utils';\n\nconst isBlank = Symbol('Blank Value');\nexport class Context {\n\tcontext: obj;\n\tconstructor(context: obj){\n\t\tthis.context = context;\n\t}\n\tgetContextVal(item: cacheObj,separators: separators, options:ContextOptions):string {\n\t\tconst id = item.content;\n\t\tconst con = this.context;\n\t\tconst {allowRootBracket,allowUnquotedProps,sanitizer} =options;\n\t\tconst {per,opBracket,clBracket,quote,apostrophe,backtick} = separators;\n\t\tconst quotes = [quote,apostrophe,backtick].flat().filter(v => id?.includes(v)).map(v => escapeRegExp(v));\n\n\t\tfunction getRelative(funId: string, localContext: obj, startIndex = 0): [symbol|unknown,number]{\n\t\t\tlet result: unknown = isBlank;\n\t\t\tlet foundLength = 0;\n\t\t\tconst base = Object.keys(localContext);\n\t\t\tFindRoot: {\n\t\t\t\tif (startIndex === 0) {\n\t\t\t\t\tfor (const rootKey of base) {\n\t\t\t\t\t\tif (funId.startsWith(rootKey,startIndex)) {\n\t\t\t\t\t\t\tresult = localContext[rootKey];\n\t\t\t\t\t\t\tfoundLength = rootKey.length;\n\t\t\t\t\t\t\tbreak FindRoot;\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\tif (startIndex !== 0) {\n\t\t\t\t\tfor (const period of per) {\n\t\t\t\t\t\tif (funId.startsWith(period,startIndex)) {\n\t\t\t\t\t\t\tfor (const rootKey of base) {\n\t\t\t\t\t\t\t\tif (funId.startsWith(period + rootKey,startIndex)) {\n\t\t\t\t\t\t\t\t\tresult = localContext[rootKey];\n\t\t\t\t\t\t\t\t\tfoundLength = period.length + rootKey.length;\n\t\t\t\t\t\t\t\t\tbreak FindRoot;\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\tif (startIndex !== 0 || allowRootBracket) {\n\t\t\t\t\tconst filteredBrackets = opBracket.map((v,i) => [v,clBracket[i]]).filter(v => funId.includes(v[0]) && funId.includes(v[1]));\n\t\t\t\t\tlet currentBrackets: [string,string] | null = null;\n\t\t\t\t\tfor (const [open, close] of filteredBrackets) {\n\t\t\t\t\t\tif (funId.startsWith(open,startIndex)) {\n\t\t\t\t\t\t\tcurrentBrackets = [open, close];\n\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t\tif (currentBrackets === null) break FindRoot;\n\t\t\t\t\tconst [open, close] = currentBrackets.map(v => escapeRegExp(v));\n\t\t\t\t\tfor (const quote of [...quotes,...(allowUnquotedProps ? [''] : [])]) {\n\t\t\t\t\t\tfor (const rk of base) {\n\t\t\t\t\t\t\tconst rootKey = escapeRegExp(rk);\n\t\t\t\t\t\t\tconst getInnerReg = RegExp(`^[\\\\s\\\\S]{${startIndex}}(${open}\\\\s*${quote}(${rootKey})${quote}\\\\s*${close})`);\n\t\t\t\t\t\t\tgetInnerReg.lastIndex = startIndex;\n\t\t\t\t\t\t\tconst match = getInnerReg.exec(id);\n\t\t\t\t\t\t\tif (match && match[2]) {\n\t\t\t\t\t\t\t\tresult = localContext[rk];\n\t\t\t\t\t\t\t\tfoundLength = match[1].length;\n\t\t\t\t\t\t\t\tbreak FindRoot;\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t\treturn [result,foundLength];\n\t\t}\n\t\tlet finResult: typeof isBlank | unknown = isBlank;\n\n\t\tlet curInd = 0;\n\t\tfor (;id?.length > curInd;) {\n\t\t\tconst localContext: obj | unknown = finResult === isBlank ? con : finResult;\n\t\t\tif (!isObj(localContext)) break;\n\t\t\tconst [newFinResult,foundLength] = getRelative(id,localContext,curInd);\n\t\t\tif (foundLength === 0) break;\n\t\t\tcurInd += foundLength;\n\t\t\tfinResult = newFinResult;\n\t\t}\n\n\t\tif (finResult === isBlank) {\n\t\t\tfinResult = sanitizer({\n\t\t\t\tisEmpty: true,\n\t\t\t\tid,\n\t\t\t\tat: curInd,\n\t\t\t});\n\t\t} else {\n\t\t\tfinResult = sanitizer({\n\t\t\t\tisEmpty: false,\n\t\t\t\tvalue: finResult,\n\t\t\t\tid,\n\t\t\t});\n\t\t}\n\t\tif (typeof finResult !== 'string') throw Error('Sanitizer did not provide string');\n\t\treturn finResult;\n\t}\n}\n\n","import type { EscapeTypeFlags, escapeNames} from './typing';\nimport { hasOwnProperty } from './utils';\n\nconst JS_DICT = {\n\t'\\'': '\\'',\n\t'\"': '\"',\n\t'\\\\': '\\\\',\n\t'`':'`',\n\t'[':'[',\n\t']':']',\n};\nconst jsonDef = (v: (keyof typeof JS_DICT) | string) => hasOwnProperty(JS_DICT,v) ? JS_DICT[v] : v;\nconst HTML_DICT = {\n\t// cSpell:disable\n\t'.': ['&period;'],\n\t'\\\\':['&#x27;'],\n\t'\\'': ['&apos;'],\n\t'\"': ['&quot;'],\n\t'[': ['&lsqb;'],\n\t']': ['&rsqb;'],\n\t// cSpell:enable\n};\nconst htmlDef = (v: (keyof typeof HTML_DICT) | string) => hasOwnProperty(HTML_DICT,v) ? HTML_DICT[v] : v;\nconst toJsUni = (code: number) => `\\\\u${Number.prototype.toString.call(code,16).toUpperCase()}`;\nconst toHTMLUni = (code: number) => `&#x${Number.prototype.toString.call(code,16).toUpperCase()};`;\nconst getUnicode = (str: string,type: 'js' | 'html') => [...str].map(v => v.split('').map(x => ({\n\tjs: toJsUni,\n\thtml: toHTMLUni,\n}[type](String.prototype.charCodeAt.call(x,0)))).join('')).join('');\n\nexport const toEscapes: {\n\t[K in escapeNames]: (str: string) => string[];\n} = {\n\turl: (str: string) => [encodeURIComponent(str)],\n\thtml: (str: string) => [[...str].map(v => getUnicode(v,'html')).join(''),[...str].map(v => htmlDef(v)).join('')],\n\tjs: (str: string) => [[...str].map(v => jsonDef(v)).join(''),[...str].map(v => getUnicode(v,'js')).join('')],\n\tjson: (str: string) => [[...str].map(v => jsonDef(v)).join(''),[...str].map(v => getUnicode(v,'js')).join('')],\n};\n\nexport const toAllEscapes = (identifier: string, flags: EscapeTypeFlags): string[] => {\n\tconst escaped = new Set<string>();\n\tfor (const k in flags) {\n\t\tif (Object.prototype.hasOwnProperty.call(toEscapes,k)) toEscapes[k](identifier).forEach((v:string) => escaped.add(v));\n\t}\n\treturn Array.from(escaped);\n};\n\n","import { Context } from './context';\nimport { toAllEscapes } from './escapes';\nimport type { Options,cacheObj, strPairs, separators } from './typing';\nimport { iter, defaulted,regReset, escapeRegExp, isObj } from './utils';\ninterface DefaultedOptions extends Options {\n\tstartStopPairs: strPairs[]\n}\nexport const getDefaultOptions = (options: Partial<Options>): DefaultedOptions => ({\n\tstartStopPairs: defaulted(options.startStopPairs,['${','}'],'Invalid startStopPairs'),\n\tescapeSep: typeof options.escapeSep === 'undefined' ? false : options.escapeSep,\n\tallowUnquotedProps: !!options.allowUnquotedProps,\n\tallowRootBracket: !!options.allowRootBracket,\n\tsanitizer: options.sanitizer || ((v) =>\n\t\tv.isEmpty === true ? 'undefined' : String(v.value)),\n\tmaxNameLength: options.maxNameLength || 256,\n});\nexport const createEscapes = toAllEscapes;\nexport const getSeparators = (escapeSep: Options['escapeSep']): separators => {\n\tconst [per,opBracket,clBracket,quote,apostrophe,backtick] = ['.','[',']','\"',\"'\",'`'].map(v => escapeSep ? toAllEscapes(v,escapeSep): [v]);\n\tconst separators = {per,opBracket,clBracket,quote,apostrophe,backtick};\n\treturn separators;\n};\n\nexport const subslate = (text: string,context: Record<string|number,unknown>, options?: Partial<Options> | undefined): string => {\n\tconst localOpts = isObj(options) ? options : {};\n\tconst defaultedOptions = getDefaultOptions(localOpts);\n\tconst {\n\t\tstartStopPairs,\n\t\tescapeSep,\n\t\tmaxNameLength,\n\t} = defaultedOptions;\n\tconst filteredPairs = startStopPairs.filter(v => text.includes(v[0]) && text.includes(v[1])).map(v =>\n\t\t[escapeRegExp(v[0]),escapeRegExp(v[1])]).map(([v1,v2]) =>\n\t\t`(?:${v1}\\\\s*([\\\\s\\\\S]{0,${maxNameLength}}?)\\\\s*${v2})`);\n\tconst cache = new Map<string,cacheObj>();\n\tconst searcher = RegExp(filteredPairs.join('|'),'g');\n\tconst reset = () => regReset(searcher);\n\tconst execSearcher = () => searcher.exec(text);\n\tfor (const res of iter(execSearcher,[],reset)) {\n\t\tif (res !== null) {\n\t\t\tconst {index} = res;\n\t\t\tconst [match, content] = res.filter(v => typeof v === 'string');\n\t\t\tif (!match && !searcher.lastIndex) break;\n\t\t\tif(!cache.has(match)) {\n\t\t\t\tcache.set(match, {\n\t\t\t\t\tcontent,\n\t\t\t\t\tindexes: [index],\n\t\t\t\t});\n\t\t\t} else {\n\t\t\t\tconst temp = cache.get(match);\n\t\t\t\tif (temp) temp.indexes.push(index);\n\t\t\t}\n\t\t}\n\t}\n\tconst lContext = new Context(context);\n\tlet indexOffset = 0;\n\tconst localStr = [...text];\n\tconst separators = getSeparators(escapeSep);\n\tfor (const [match, item] of cache) {\n\t\tif (!Object.prototype.hasOwnProperty.call(item,'value')) {\n\t\t\titem.value = lContext.getContextVal(item,separators,defaultedOptions);\n\t\t}\n\t\tfor (const ind of item.indexes) {\n\t\t\tconst value = String(item.value || '');\n\t\t\tlocalStr.splice(ind + indexOffset,match.length, ...value);\n\t\t\tindexOffset += (value.length - match.length);\n\t\t}\n\t}\n\treturn localStr.join('');\n};\nexport default subslate;\n"],"names":["isNonEmptyArray","v","Array","isArray","length","isStrArr","every","x","defaulted","d","errMsg","isArrStrArr","Error","escapeRegExp","text","replace","isObj","obj","Object","keys","hasOwnProperty","prop","prototype","call","isBlank","Symbol","Context","[object Object]","context","item","separators","options","id","content","con","this","allowRootBracket","allowUnquotedProps","sanitizer","per","opBracket","clBracket","quote","apostrophe","backtick","quotes","flat","filter","includes","map","getRelative","funId","localContext","startIndex","result","foundLength","base","FindRoot","rootKey","startsWith","period","filteredBrackets","i","currentBrackets","open","close","rk","getInnerReg","RegExp","lastIndex","match","exec","finResult","curInd","newFinResult","isEmpty","at","value","JS_DICT","jsonDef","HTML_DICT","toJsUni","code","Number","toString","toUpperCase","toHTMLUni","getUnicode","str","type","split","js","html","String","charCodeAt","join","toEscapes","url","encodeURIComponent","htmlDef","json","toAllEscapes","identifier","flags","escaped","Set","k","forEach","add","from","getDefaultOptions","startStopPairs","escapeSep","maxNameLength","createEscapes","getSeparators","subslate","localOpts","defaultedOptions","filteredPairs","v1","v2","cache","Map","searcher","reset","execSearcher","res","fn","inputs","endFn","iterator","done","undefined","iter","index","has","temp","get","indexes","push","set","lContext","indexOffset","localStr","getContextVal","ind","splice"],"mappings":"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"}